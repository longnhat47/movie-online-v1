{"ast":null,"code":"// import { mapActions, mapState } from 'vuex'\nimport commentService from '@/services/comment/comment';\nimport movieService from '@/services/movie/movie';\nexport default {\n  data() {\n    return {\n      data: null,\n      dataModel: {\n        id: '',\n        movie: '',\n        user: {},\n        content: ''\n      },\n      isShow: false,\n      button: {\n        edit: false,\n        delete: false\n      },\n      movie: null\n    };\n  },\n  components: {},\n  computed: {\n    // ...mapState('comment', ['comment']),\n    // ...mapState('movie', ['movie']),\n    nameMovie() {\n      return id => {\n        var name = '';\n        if (this.movie) {\n          this.movie.forEach(o => {\n            if (o.id == id) {\n              name = o.name;\n            }\n          });\n        }\n        return name;\n      };\n    }\n  },\n  methods: {\n    // ...mapActions('comment', ['fetchComment', 'createComment', 'updateComment', 'deleteComment']),\n    // ...mapActions('movie', ['fetchMovie']),\n    modalEvent(str) {\n      switch (str) {\n        case 'edit':\n          this.isShow = !this.isShow;\n          this.button.edit = !this.button.edit;\n          break;\n        case 'delete':\n          this.isShow = !this.isShow;\n          this.button.delete = !this.button.delete;\n          break;\n      }\n    },\n    hideModal(event) {\n      if (event.target.id == 'modal') {\n        this.$refs.modal.style.display = 'none';\n      }\n    },\n    editModal(data) {\n      for (const [key] of Object.entries(this.dataModel)) {\n        this.dataModel[key] = data[key];\n      }\n      this.isShow = !this.isShow;\n      this.button.edit = !this.button.edit;\n    },\n    deleteModal(data) {\n      this.dataModel.id = data.id;\n      this.isShow = !this.isShow;\n      this.button.delete = !this.button.delete;\n      const el = this.$refs.titleDelete;\n      el.innerHTML = `Bạn có muốn xóa bình luận của ${data.user.email}` + `<hr><span>Nội dung</span><h1>${data.content}</h1>`;\n    },\n    async editModel() {\n      console.log(this.dataModel);\n      const res = await this.updateComment(this.dataModel);\n      console.log(res.data);\n      var i = 0;\n      while (i < this.data.length) {\n        if (this.data[i].id === this.dataModel.id) {\n          for (const [key] of Object.entries(this.data[i])) {\n            this.data[i][key] = this.dataModel[key];\n          }\n          break;\n        } else {\n          ++i;\n        }\n      }\n      this.isShow = !this.isShow;\n      this.button.edit = !this.button.edit;\n    },\n    removeModel() {\n      this.deleteComment(this.dataModel);\n      var i = 0;\n      while (i < this.data.length) {\n        if (this.data[i].id === this.dataModel.id) {\n          console.log(this.data[i]);\n          this.data.splice(i, 1);\n          break;\n        } else {\n          ++i;\n        }\n      }\n      this.isShow = !this.isShow;\n      this.button.delete = !this.button.delete;\n    }\n  },\n  async created() {\n    const res = await Promise.all([commentService.getAll(), movieService.getAll()]);\n    this.data = res[0].data;\n    this.movie = res[1].data;\n  }\n};","map":{"version":3,"names":["commentService","movieService","data","dataModel","id","movie","user","content","isShow","button","edit","delete","components","computed","nameMovie","name","forEach","o","methods","modalEvent","str","hideModal","event","target","$refs","modal","style","display","editModal","key","Object","entries","deleteModal","el","titleDelete","innerHTML","email","editModel","console","log","res","updateComment","i","length","removeModel","deleteComment","splice","created","Promise","all","getAll"],"sources":["D:\\nhatj\\WorkSpace\\MovieOnline\\movie-web\\src\\components\\admin\\CommentComponent.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <h3 class=\"col-3\">Comment</h3>\n      </div>\n      <table class=\"table text-light\">\n        <thead>\n          <tr class=\"row\">\n            <th class=\"col-1\" scope=\"col\">ID</th>\n            <th class=\"col-2\" scope=\"col\">User</th>\n            <th class=\"col-3\" scope=\"col\">Movie</th>\n            <th class=\"col-4\" scope=\"col\">Content</th>\n            <th class=\"col-2\" scope=\"col\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr class=\"row\" v-for=\"(d, index) in data\" :key=\"index\">\n            <th class=\"col-1\" scope=\"row\">{{ d.id }}</th>\n            <td class=\"col-2\">{{ d.user.email }}</td>\n            <td class=\"col-3\">{{ nameMovie(d.movie) }}</td>\n            <td class=\"col-4\">{{ d.content }}</td>\n            <td class=\"col-2 d-flex justify-content-end\">\n              <button class=\"btn btn-secondary\" @click=\"editModal(d)\">Sửa</button>\n              <button class=\"btn btn-danger ms-2\" @click=\"deleteModal(d)\">Xóa</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <!-- Modal -->\n      <div ref=\"modal\" id=\"modal\" class=\"modal\" v-show=\"isShow\" @click=\"hideModal\">\n        <!-- Edit -->\n        <div class=\"modal-content\" v-show=\"button.edit\">\n          <div class=\"row justify-content-end\">\n            <button class=\"btn-close me-3\" @click=\"modalEvent('edit')\"></button>\n          </div>\n          <div class=\"p-2\">\n            <label for=\"comment-movie\" class=\"form-label\">Phim</label>\n            <select class=\"form-select\" @change=\"dataModel.movie = $event.target.value\" id=\"comment-movie\"\n              aria-label=\"Default select example\">\n              <option v-for=\"m in movie\" :key=\"m.id\" :value=\"m.id\" :selected=\"m.id === dataModel.movie\">\n                {{ m.name }}\n              </option>\n            </select>\n          </div>\n          <div class=\"p-2\">\n            <label for=\"name\" class=\"form-label\">Nội dung</label>\n            <input type=\"text\" class=\"form-control\" id=\"name\" placeholder=\"Nội dung\"\n              @change=\"dataModel.content = $event.target.value\" :value=\"dataModel.content\">\n          </div>\n          <button class=\"col-1 btn btn-primary\" @click=\"editModel()\">Sửa</button>\n        </div>\n        <!-- Delete -->\n        <div class=\"modal-content\" v-show=\"button.delete\">\n          <div class=\"row justify-content-end\">\n            <button class=\"btn-close me-3\" @click=\"modalEvent('delete')\"></button>\n          </div>\n          <div class=\"p-4\">\n            <label ref=\"titleDelete\" class=\"form-label text-danger fs-3 text-uppercase\">Xóa</label>\n          </div>\n          <button class=\"col-1 btn btn-danger\" @click=\"removeModel\">Xóa</button>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\n// import { mapActions, mapState } from 'vuex'\nimport commentService from '@/services/comment/comment'\nimport movieService from '@/services/movie/movie'\nexport default {\n  data() {\n    return {\n      data: null,\n      dataModel: {\n        id: '',\n        movie: '',\n        user: {},\n        content: ''\n      },\n      isShow: false,\n      button: {\n        edit: false,\n        delete: false,\n      },\n      movie: null\n    }\n  },\n  components: {\n\n  },\n  computed: {\n    // ...mapState('comment', ['comment']),\n    // ...mapState('movie', ['movie']),\n    nameMovie() {\n      return (id) => {\n        var name = ''\n        if (this.movie) {\n          this.movie.forEach((o) => {\n            if (o.id == id) {\n              name = o.name\n            }\n          })\n        }\n        return name\n      }\n    }\n  },\n  methods: {\n    // ...mapActions('comment', ['fetchComment', 'createComment', 'updateComment', 'deleteComment']),\n    // ...mapActions('movie', ['fetchMovie']),\n    modalEvent(str) {\n      switch (str) {\n        case 'edit':\n          this.isShow = !this.isShow;\n          this.button.edit = !this.button.edit;\n          break;\n        case 'delete':\n          this.isShow = !this.isShow;\n          this.button.delete = !this.button.delete;\n          break;\n      }\n    },\n    hideModal(event) {\n      if (event.target.id == 'modal') {\n        this.$refs.modal.style.display = 'none'\n      }\n    },\n    editModal(data) {\n      for (const [key] of Object.entries(this.dataModel)) {\n        this.dataModel[key] = data[key];\n      }\n      this.isShow = !this.isShow;\n      this.button.edit = !this.button.edit;\n    },\n    deleteModal(data) {\n      this.dataModel.id = data.id;\n      this.isShow = !this.isShow;\n      this.button.delete = !this.button.delete;\n      const el = this.$refs.titleDelete\n      el.innerHTML = `Bạn có muốn xóa bình luận của ${data.user.email}` + `<hr><span>Nội dung</span><h1>${data.content}</h1>`\n    },\n    async editModel() {\n      console.log(this.dataModel)\n      const res = await this.updateComment(this.dataModel)\n      console.log(res.data)\n      var i = 0;\n      while (i < this.data.length) {\n        if (this.data[i].id === this.dataModel.id) {\n          for (const [key] of Object.entries(this.data[i])) {\n            this.data[i][key] = this.dataModel[key];\n          }\n          break;\n        } else {\n          ++i;\n        }\n      }\n      this.isShow = !this.isShow;\n      this.button.edit = !this.button.edit;\n    },\n    removeModel() {\n      this.deleteComment(this.dataModel)\n      var i = 0;\n      while (i < this.data.length) {\n        if (this.data[i].id === this.dataModel.id) {\n          console.log(this.data[i]);\n          this.data.splice(i, 1);\n          break;\n        } else {\n          ++i;\n        }\n      }\n      this.isShow = !this.isShow;\n      this.button.delete = !this.button.delete;\n    }\n  },\n  async created() {\n    const res = await Promise.all([commentService.getAll(), movieService.getAll()]) \n    this.data = res[0].data\n    this.movie = res[1].data\n  }\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.home {\n  min-height: 90vh;\n  background-color: #1a1a1a;\n  padding: 48px;\n  color: #ccc;\n\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    /* Hidden by default */\n    position: fixed;\n    /* Stay in place */\n    z-index: 1;\n    /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%;\n    /* Full width */\n    height: 100%;\n    /* Full height */\n    overflow: auto;\n    /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0);\n    /* Fallback color */\n    background-color: rgba(0, 0, 0, 0.4);\n\n    /* Black w/ opacity */\n    /* Modal Content/Box */\n    .modal-content {\n      background-color: #fefefe;\n      margin: 15% auto;\n      /* 15% from the top and centered */\n      padding: 20px;\n      border: 1px solid #888;\n      width: 80%;\n      /* Could be more or less, depending on screen size */\n\n      .form-label {\n        color: #333;\n      }\n    }\n  }\n\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}