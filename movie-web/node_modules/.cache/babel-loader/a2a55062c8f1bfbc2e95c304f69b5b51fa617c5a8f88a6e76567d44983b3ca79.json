{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1c7d5348\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"movie-detail\"\n};\nconst _hoisted_2 = {\n  class: \"container text-center\"\n};\nconst _hoisted_3 = {\n  class: \"l-page\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"c-content-header\"\n}, \"vue video player\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"p-video-player\",\n  id: \"video-player\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"video\", {\n  class: \"p-video-player__media\"\n}, [/*#__PURE__*/_createElementVNode(\"source\", {\n  src: \"http://www.tplh.net/file/sample.mp4\"\n})], -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"p-video-player__seekbar-back\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"p-video-player__control-panel\"\n};\nconst _hoisted_9 = {\n  class: \"p-video-player__time-wrap\"\n};\nconst _hoisted_10 = {\n  class: \"p-video-player__time-current\"\n};\nconst _hoisted_11 = {\n  class: \"p-video-player__time-all\"\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString(_ctx.movie.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", {\n    class: \"p-video-player__seekbar-wrap\",\n    id: \"video-player-media\",\n    onMousedown: _cache[0] || (_cache[0] = (...args) => _ctx.grabSeekbar && _ctx.grabSeekbar(...args)),\n    onTouchstart: _cache[1] || (_cache[1] = (...args) => _ctx.grabSeekbar && _ctx.grabSeekbar(...args)),\n    onTouchmove: _cache[2] || (_cache[2] = (...args) => _ctx.moveSeekbar && _ctx.moveSeekbar(...args)),\n    onTouchend: _cache[3] || (_cache[3] = (...args) => _ctx.releaseSeekbar && _ctx.releaseSeekbar(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"p-video-player__seekbar-current\",\n    style: _normalizeStyle({\n      transform: 'scaleX(' + _ctx.getProgressRate + ')'\n    })\n  }, null, 4 /* STYLE */), _hoisted_7], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    class: \"p-video-player__btn\",\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.playOrPause && _ctx.playOrPause(...args))\n  }, _toDisplayString(_ctx.isPlaying ? 'pause' : 'play'), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"p-video-player__btn\",\n    onClick: _cache[5] || (_cache[5] = (...args) => _ctx.stop && _ctx.stop(...args))\n  }, \"stop\"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.getCurrentTime), 1 /* TEXT */), _createTextVNode(\"/\"), _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.getDuration), 1 /* TEXT */)])])])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","id","src","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","_ctx","movie","name","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onMousedown","_cache","args","grabSeekbar","onTouchstart","onTouchmove","moveSeekbar","onTouchend","releaseSeekbar","style","_normalizeStyle","transform","getProgressRate","_hoisted_7","_hoisted_8","onClick","playOrPause","isPlaying","stop","_hoisted_9","_hoisted_10","getCurrentTime","_hoisted_11","getDuration"],"sources":["D:\\nhatj\\WorkSpace\\movie-web\\src\\components\\WatchMovieComponent.vue"],"sourcesContent":["<template>\n  <div class=\"movie-detail\">\n    <div class=\"container text-center\">\n      <h1>{{ movie.name }}</h1>\n      <div class=\"l-page\">\n        <h1 class=\"c-content-header\">vue video player</h1>\n        <div class=\"p-video-player\" id=\"video-player\">\n          <video class=\"p-video-player__media\">\n            <source src=\"http://www.tplh.net/file/sample.mp4\" />\n          </video>\n          <div class=\"p-video-player__seekbar-wrap\" id=\"video-player-media\" @mousedown=\"grabSeekbar\"\n            @touchstart=\"grabSeekbar\" @touchmove=\"moveSeekbar\" @touchend=\"releaseSeekbar\">\n            <div class=\"p-video-player__seekbar-current\" :style=\"{ transform: 'scaleX(' + getProgressRate + ')' }\"></div>\n            <div class=\"p-video-player__seekbar-back\"></div>\n          </div>\n          <div class=\"p-video-player__control-panel\">\n            <button class=\"p-video-player__btn\" @click=\"playOrPause\">{{ isPlaying ? 'pause' : 'play' }}</button>\n            <button class=\"p-video-player__btn\" @click=\"stop\">stop</button>\n            <div class=\"p-video-player__time-wrap\"><span class=\"p-video-player__time-current\">{{ getCurrentTime\n            }}</span>/<span class=\"p-video-player__time-all\">{{ getDuration }}</span></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\nexport default {\n  components: {\n  },\n  computed: {\n    ...mapState('movie', ['movie'])\n  },\n  methods: {\n    ...mapActions('movie', ['fetchMovieDetail']),\n    debounce = (callback, duration) => {\n      var timer;\n      return function (event) {\n        clearTimeout(timer);\n        timer = setTimeout(function () {\n          callback(event);\n        }, duration);\n      };\n    },\n\n    buildVideoPlayer = (id) => {\n      return new Vue({\n        el: `#${id}`,\n        data: {\n          media: null,\n          seekbar: null,\n          seekbarWidth: 0,\n          seekbarOffsetX: 0,\n          time: 0,\n          duration: 0,\n          isPlaying: false,\n          isGrabbingSeekbar: false,\n        },\n        mounted: function () {\n          // init\n          this.media = this.$el.querySelector('.p-video-player__media');\n          this.seekbar = this.$el.querySelector('.p-video-player__seekbar-wrap');\n          this.reLayoutSeekbar();\n\n          // addEventListener\n          window.addEventListener('resize', debounce(() => {\n            this.reLayoutSeekbar();\n          }), 100);\n          document.addEventListener('mousemove', (event) => {\n            this.moveSeekbar(event);\n          });\n          document.addEventListener('mouseup', (event) => {\n            this.releaseSeekbar(event);\n          });\n          this.media.addEventListener('loadedmetadata', () => {\n            this.duration = this.media.duration;\n          });\n          this.media.addEventListener('ended', () => {\n            this.media.currentTime = 0;\n            this.isPlaying = false;\n          });\n        },\n        computed: {\n          getProgressRate: function () {\n            return this.time / this.duration;\n          },\n          getCurrentTime: function () {\n            return this.convertSecondsToTime(this.time);\n          },\n          getDuration: function () {\n            return this.convertSecondsToTime(this.duration);\n          },\n        },\n        methods: {\n          play: function () {\n            this.media.play();\n            this.isPlaying = true;\n            this.loop();\n          },\n          pause: function () {\n            this.media.pause();\n            this.isPlaying = false;\n          },\n          playOrPause: function () {\n            if (this.isPlaying) {\n              this.pause();\n            } else {\n              this.play();\n            }\n          },\n          stop: function () {\n            this.media.currentTime = 0;\n            this.pause();\n          },\n          loop: function () {\n            this.time = this.media.currentTime;\n            if (!this.isPlaying) return;\n            requestAnimationFrame(() => {\n              this.loop();\n            });\n          },\n          grabSeekbar: function (event) {\n            event.preventDefault();\n            this.isGrabbingSeekbar = true;\n            this.time = this.media.currentTime = event.layerX / this.seekbarWidth * this.duration;\n            this.media.pause();\n          },\n          moveSeekbar: function (event) {\n            event.preventDefault();\n            if (!this.isGrabbingSeekbar) return;\n            this.time = this.media.currentTime =\n              (event.clientX - this.seekbarOffsetX - window.pageXOffset)\n              / this.seekbarWidth * this.duration;\n          },\n          releaseSeekbar: function (event) {\n            event.preventDefault();\n            this.isGrabbingSeekbar = false;\n            if (this.isPlaying) {\n              this.media.play();\n            }\n          },\n          reLayoutSeekbar: function () {\n            this.seekbarWidth = this.seekbar.clientWidth;\n            this.seekbarOffsetX = this.seekbar.getBoundingClientRect().left;\n          },\n          convertSecondsToTime: function (time) {\n            let seconds = Math.floor(time % 60);\n            if (seconds < 10) seconds = '0' + seconds;\n            let minutes = Math.floor(time / 60 % 60);\n            return `${minutes}:${seconds}`\n          },\n        }\n      });\n    },\n\n    \n  },\n  created() {\n    this.fetchMovieDetail(this.$route.params.id)\n  }\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.l-page {\n  max-width: 1024px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.c-content-header {\n  margin-top: 0;\n  font-size: 2em;\n  font-weight: 400;\n}\n\n.p-video-player {\n  &__media {\n    width: 100%;\n    display: block;\n  }\n\n  &__seekbar {\n    &-wrap {\n      cursor: pointer;\n      position: relative;\n      margin-bottom: 10px;\n      padding: 10px 0;\n    }\n\n    &-current,\n    &-back {\n      height: 3px;\n      position: absolute;\n      top: 10px;\n      right: 0;\n      left: 0;\n    }\n\n    &-current {\n      z-index: 2;\n      background-color: #111;\n      transform: scaleX(0);\n      transform-origin: left;\n    }\n\n    &-back {\n      background-color: #ddd;\n    }\n  }\n\n  &__control-panel {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n  }\n\n  &__btn {\n    width: 5em;\n    margin-right: 2px;\n    padding: 0.5em 0;\n  }\n\n  &__time {\n    &-wrap {\n      margin-left: 1em;\n    }\n\n    &-current {\n      margin-right: 0.25em;\n    }\n\n    &-all {\n      margin-left: 0.25em;\n    }\n  }\n}</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAuB;;EAE3BA,KAAK,EAAC;AAAQ;gEACjBC,mBAAA,CAAkD;EAA9CD,KAAK,EAAC;AAAkB,GAAC,kBAAgB;;EACxCA,KAAK,EAAC,gBAAgB;EAACE,EAAE,EAAC;;gEAC7BD,mBAAA,CAEQ;EAFDD,KAAK,EAAC;AAAuB,I,aAClCC,mBAAA,CAAoD;EAA5CE,GAAG,EAAC;AAAqC,G;gEAKjDF,mBAAA,CAAgD;EAA3CD,KAAK,EAAC;AAA8B;;EAEtCA,KAAK,EAAC;AAA+B;;EAGnCA,KAAK,EAAC;AAA2B;;EAAOA,KAAK,EAAC;AAA8B;;EACjEA,KAAK,EAAC;AAA0B;;uBAlB1DI,mBAAA,CAuBM,OAvBNC,UAuBM,GAtBJJ,mBAAA,CAqBM,OArBNK,UAqBM,GApBJL,mBAAA,CAAyB,YAAAM,gBAAA,CAAlBC,IAAA,CAAAC,KAAK,CAACC,IAAI,kBACjBT,mBAAA,CAkBM,OAlBNU,UAkBM,GAjBJC,UAAkD,EAClDX,mBAAA,CAeM,OAfNY,UAeM,GAdJC,UAEQ,EACRb,mBAAA,CAIM;IAJDD,KAAK,EAAC,8BAA8B;IAACE,EAAE,EAAC,oBAAoB;IAAEa,WAAS,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAU,WAAA,IAAAV,IAAA,CAAAU,WAAA,IAAAD,IAAA,CAAW;IACtFE,YAAU,EAAAH,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAU,WAAA,IAAAV,IAAA,CAAAU,WAAA,IAAAD,IAAA,CAAW;IAAGG,WAAS,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAa,WAAA,IAAAb,IAAA,CAAAa,WAAA,IAAAJ,IAAA,CAAW;IAAGK,UAAQ,EAAAN,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAe,cAAA,IAAAf,IAAA,CAAAe,cAAA,IAAAN,IAAA,CAAc;MAC5EhB,mBAAA,CAA6G;IAAxGD,KAAK,EAAC,iCAAiC;IAAEwB,KAAK,EAAAC,eAAA;MAAAC,SAAA,cAA2BlB,IAAA,CAAAmB,eAAe;IAAA;2BAC7FC,UAAgD,C,4BAElD3B,mBAAA,CAKM,OALN4B,UAKM,GAJJ5B,mBAAA,CAAoG;IAA5FD,KAAK,EAAC,qBAAqB;IAAE8B,OAAK,EAAAd,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAuB,WAAA,IAAAvB,IAAA,CAAAuB,WAAA,IAAAd,IAAA,CAAW;sBAAKT,IAAA,CAAAwB,SAAS,qCACrE/B,mBAAA,CAA+D;IAAvDD,KAAK,EAAC,qBAAqB;IAAE8B,OAAK,EAAAd,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,IAAA,CAAAyB,IAAA,IAAAzB,IAAA,CAAAyB,IAAA,IAAAhB,IAAA,CAAI;KAAE,MAAI,GACtDhB,mBAAA,CAC+E,OAD/EiC,UAC+E,GADxCjC,mBAAA,CAC9B,QAD8BkC,WAC9B,EAAA5B,gBAAA,CAD4EC,IAAA,CAAA4B,cAAc,kB,iBAC1F,GAAC,GAAAnC,mBAAA,CAA+D,QAA/DoC,WAA+D,EAAA9B,gBAAA,CAArBC,IAAA,CAAA8B,WAAW,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}